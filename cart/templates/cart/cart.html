<!DOCTYPE html>
{% extends 'base.html' %}
{% load static %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="container center-align">
        <div class="row">
            <h2 class="header center-align">Your Shopping Cart</h2>   
            <hr>                     
        </div>
        <div class="row cart-container hide-on-small-only">
            {% if cart_items %}

                <table class="striped">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Brewery</th>
                            <th>Style</th>
                            <th>ABV.</th>
                            <th>Vol.</th>
                            <th>Quantity</th>
                            <th>Price</th>                         
                        </tr>
                    </thead>
                {% for beer in cart_items %}
                    <tbody>
                        <tr>
                            <td>{{ beer.beer }}</td>
                            <td>{{ beer.beer.brewery.friendly_name }}</td>
                            <td>{{ beer.beer.style.friendly_name }}</td>
                            <td>{{ beer.beer.abv }}%</td>
                            <td>{{ beer.beer.volume }}ml</td>
                            <td class="center-align">
                                <div class="row">
                                    <form class="form col s4 update-form" method="POST" action="{% url 'adjust_cart' beer.beer_id %}">
                                        {% csrf_token %}
                                            <div class="form-group">
                                                <div class="input-group">
                                                    <div class="qty-select">
                                                        <input class="form-control qty_input center-align" type="number"
                                                            name="quantity" value="{{ beer.quantity }}" min="0" max="99"
                                                            data-item_id="{{ beer.id }}"
                                                            id="id_qty_{{ beer.id }}">
                                                    </div>
                                                </div>
                                            </div>
                                    </form>     
                                    <a href="#" class="update-link submit cart-link green-text">update</a>
                                </div> 
                                          
                            </td>
                            <td>£{{ beer.beer.price }}</td>
                        </tr>
                    </tbody>
                {% endfor %}
                </table>
                <h6 class="right-align">Delivery = £{{ delivery | floatformat:2 }}</h6>
                <h5 class="right-align">Total = <b>£{{ grand_total | floatformat:2 }}</b></h5>
            {% else %}                
                    <h4 class="">Your cart is empty.</h4>
                    <a href="{% url 'beers' %}" class="btn large red darken-4">Back to Beer Store</a>
            {% endif %}
            
        </div>
        {% include "includes/mobile_cart.html" %}
    </div>
{% endblock %}